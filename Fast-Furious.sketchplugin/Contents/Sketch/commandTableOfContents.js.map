{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/commandTableOfContents.js","webpack://exports/./src/lib/Constants.js","webpack://exports/./src/lib/Utilities.js","webpack://exports/external \"sketch\"","webpack://exports/external \"sketch/dom\""],"names":["Sketch","require","Page","Artboard","Group","Text","document","getSelectedDocument","getTocPage","pages","page","name","TocPageName","undefined","getFontSize","level","createHeading","artboard","serialIdx","pageIdx","layer","heading","getHeading","headingLevel","getHeadingLevel","leftRect","text","frame","x","y","width","heigth","rightRect","group","parent","adjustToFit","serialAndContent","style","borders","fontFamily","fontSize","textColor","alignment","verticalAlignment","combinator","pageNumber","toString","height","combinatorWidth","i","fixedWidth","layers","isSymbolsPage","list","getPagePosterities","concat","length","console","log","headingsMap","Map","forEach","isTopLayer","startsWith","set","size","tocPage","unshift","serial","idx","parseInt","serialList","split","slice","push","join","UI","message","ArtboardSortEnum","Top2BottomByLayerList","Bottom2TopByLayerList","Left2RightByArtboard","Right2LeftByArtboard","Top2BottomByArtboard","ArtbaordLayersSortEnum","hasLayers","getArtboardsSorted","sort","reverse","a","b","tailGetLayerPosterities","posterities","artboardSort","artboardLayersSort","artboards","flag","title","j","charAt","type"],"mappings":"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","file":"commandTableOfContents.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/commandTableOfContents.js\");\n","import sketch from \"sketch\";\nimport {\n  getPagePosterities,\n  getHeadingLevel,\n  getHeading,\n  isTopLayer\n} from \"./lib/Utilities\";\nimport { TocPageName } from \"./lib/Constants\";\n\nlet Sketch = require(\"sketch\");\nlet Page = require(\"sketch/dom\").Page;\nlet Artboard = require(\"sketch/dom\").Artboard;\nlet Group = require(\"sketch/dom\").Group;\nlet Text = require(\"sketch/dom\").Text;\n\nlet document = require(\"sketch/dom\").getSelectedDocument();\n\nfunction getTocPage() {\n  let pages = document.pages;\n  for (let page of pages) {\n    if (page.name === TocPageName) {\n      return page;\n    }\n  }\n\n  return undefined;\n}\n\nfunction getFontSize(level) {\n  if (level === 1) {\n    return 60;\n  } else if (level === 2) {\n    return 50;\n  } else if (level === 3) {\n    return 40;\n  } else if (level === 4) {\n    return 30;\n  } else if (level === 5) {\n    return 30;\n  } else if (level === 6) {\n    return 30;\n  }\n}\n\nfunction createHeading(artboard, serialIdx, pageIdx, layer) {\n  let heading = getHeading(layer);\n  let headingLevel = getHeadingLevel(layer);\n\n  // init group\n  let leftRect = new Text({\n    text: \"\",\n    name: \"Left Space\"\n  });\n  leftRect.frame = { x: 0, y: 0, width: 50, heigth: 100 };\n  let rightRect = new Text({\n    text: \"\",\n    name: \"Right Space\"\n  });\n  rightRect.frame = { x: 950, y: 0, width: 50, heigth: 100 }; // NOTE: height 在此处并不生效！\n\n  let group = new Group({\n    parent: artboard,\n    name: serialIdx\n  });\n  group.adjustToFit();\n\n  let serialAndContent = new Text({\n    text: serialIdx + \" \" + heading, // NOTE: list text first! text maybe change the name\n    name: \"Serial and Content\",\n    style: {\n      borders: [],\n      fontFamily: \"平方-简\",\n      fontSize: getFontSize(headingLevel),\n      textColor: \"#000000\",\n      alignment: \"left\",\n      verticalAlignment: \"center\"\n    }\n  });\n\n  let combinator = new Text({\n    text: \"......................\",\n    name: \"Combinator\",\n    style: {\n      borders: [],\n      fontFamily: \"平方-简\",\n      fontSize: 40,\n      textColor: \"#000000\",\n      alignment: \"left\",\n      verticalAlignment: \"center\"\n    }\n  });\n\n  let pageNumber = new Text({\n    text: pageIdx.toString(),\n    name: \"Page Number\",\n    style: {\n      borders: [],\n      fontFamily: \"平方-简\",\n      fontSize: 40,\n      textColor: \"#000000\",\n      alignment: \"right\",\n      verticalAlignment: \"center\"\n    }\n  });\n\n  group.frame = { x: 0, width: 1000, height: 100 };\n\n  serialAndContent.frame = {\n    x: 50 * headingLevel,\n    y: (group.frame.height - serialAndContent.frame.height) / 2\n  };\n\n  let text = \"\";\n  let combinatorWidth =\n    800 - serialAndContent.frame.x - serialAndContent.frame.width;\n  for (let i = 0; i < combinatorWidth / 11; ++i) {\n    text += \".\";\n    combinator.text = text;\n    if (combinator.frame.width >= combinatorWidth) {\n      break;\n    }\n  }\n  combinator.name = \"Combinator\"; // NOTE: 设置 text 后需要恢复 name!\n\n  combinator.fixedWidth = true;\n  combinator.frame = {\n    x: serialAndContent.frame.x + serialAndContent.frame.width + 50,\n    y: (group.frame.height - combinator.frame.height) / 2,\n    width: combinatorWidth\n  };\n  combinator.style.alignment = \"right\";\n\n  pageNumber.fixedWidth = true;\n  pageNumber.frame = {\n    x: 850,\n    y: (group.frame.height - pageNumber.frame.height) / 2,\n    width: 100\n  };\n\n  group.layers = [\n    leftRect,\n    serialAndContent,\n    combinator,\n    pageNumber,\n    rightRect\n  ];\n\n  return group;\n}\n\nexport default function() {\n  // get layers\n  let pages = document.pages;\n  let layers = [];\n  for (let page of pages) {\n    if (page.isSymbolsPage() || page.name === TocPageName) continue;\n    let list = getPagePosterities(page);\n    layers = layers.concat(list);\n  }\n  if (layers.length === 0) {\n    console.log(\"Have no layers in the document.\");\n    return;\n  }\n\n  // get headings for a map(layer, pageIdx)\n  let headingsMap = new Map();\n  let pageIdx = 0;\n  layers.forEach(layer => {\n    if (isTopLayer(layer)) ++pageIdx;\n    if (!layer.name.startsWith(\"#\")) return;\n    headingsMap.set(layer, pageIdx);\n  });\n  if (headingsMap.size === 0) {\n    console.log(\"Have no layers as headings.\");\n    return;\n  }\n\n  // check TOC page\n  let tocPage = getTocPage();\n  if (tocPage === undefined) {\n    tocPage = new Page({ parent: document, name: TocPageName });\n    pages.unshift(tocPage);\n  }\n  tocPage.layers = [];\n\n  // add headings\n  let artboard;\n  let serial = \"\";\n  let idx = -1;\n  for (let [layer, pageIdx] of headingsMap) {\n    ++idx;\n\n    // create artboard\n    if (idx % 9 === 0) {\n      artboard = new Artboard({\n        parent: tocPage,\n        name: \"Contents \" + parseInt(idx / 9 + 1),\n        frame: { x: 50, y: 50 + 1050 * (idx / 9), width: 1000, height: 1000 }\n      });\n    }\n\n    let level = getHeadingLevel(layer);\n    let serialList = serial.split(\".\");\n    if (serialList.length < level - 1) {\n      --idx;\n      console.log(\"Invalid heading flag.\");\n      continue;\n    }\n\n    if (serialList[0] === \"\") {\n      serialList[0] = 1;\n    } else if (serialList.length >= level) {\n      serialList[level - 1] = parseInt(serialList[level - 1]) + 1;\n      serialList = serialList.slice(0, level);\n    } else {\n      serialList.push(1);\n    }\n    serial = serialList.join(\".\");\n\n    // create headings\n    let group = createHeading(artboard, serial, pageIdx, layer);\n    group.frame.y = 50 + group.frame.height * (idx % 9);\n  }\n\n  Sketch.UI.message(\"Successfully! 🙌\");\n}\n","export const TocPageName = \"Table of Contents\";\n\nexport const ArtboardSortEnum = {\n  Top2BottomByLayerList: 1,\n  Bottom2TopByLayerList: 2,\n  Left2RightByArtboard: 3,\n  Right2LeftByArtboard: 4,\n  Top2BottomByArtboard: 5\n};\nexport const ArtbaordLayersSortEnum = {\n  Top2BottomByLayerList: 1,\n  Bottom2TopByLayerList: 2\n};\n","import { ArtboardSortEnum, ArtbaordLayersSortEnum } from \"./Constants\";\n\nfunction hasLayers(layer) {\n  return typeof layer.layers !== \"undefined\" && layer.layers.length !== 0;\n}\n\nfunction getArtboardsSorted(\n  page,\n  sort = ArtboardSortEnum.Left2RightByArtboard\n) {\n  let layers = page.layers.slice();\n  if (sort === ArtboardSortEnum.Top2BottomByLayerList) {\n    return layers.reverse();\n  } else if (sort === ArtboardSortEnum.Bottom2TopByLayerList) {\n    return layers;\n  } else if (sort === ArtboardSortEnum.Left2RightByArtboard) {\n    return layers.sort(function(a, b) {\n      if (a.frame.y < b.frame.y) {\n        return -1;\n      } else if (a.frame.y > b.frame.y) {\n        return 1;\n      }\n      if (a.frame.x < b.frame.x) {\n        return -1;\n      } else if (a.frame.x > b.frame.x) {\n        return 1;\n      }\n      return 0;\n    });\n  } else if (sort === ArtboardSortEnum.Right2LeftByArtboard) {\n    return layers.sort(function(a, b) {\n      if (a.frame.y < b.frame.y) {\n        return -1;\n      } else if (a.frame.y > b.frame.y) {\n        return 1;\n      }\n      if (a.frame.x > b.frame.x) {\n        return -1;\n      } else if (a.frame.x < b.frame.x) {\n        return 1;\n      }\n      return 0;\n    });\n  } else if (sort === ArtboardSortEnum.Top2BottomByArtboard) {\n    return layers.sort(function(a, b) {\n      if (a.frame.x < b.frame.x) {\n        return -1;\n      } else if (a.frame.x > b.frame.x) {\n        return 1;\n      }\n      if (a.frame.y < b.frame.y) {\n        return -1;\n      } else if (a.frame.y > b.frame.y) {\n        return 1;\n      }\n      return 0;\n    });\n  } else {\n    return undefined;\n  }\n}\n\nfunction tailGetLayerPosterities(layer, posterities) {\n  // sort from top to bottom by left layer list\n  if (!hasLayers(layer)) {\n    return posterities;\n  }\n\n  let reverse = layer.layers.slice().reverse();\n  for (let layer of reverse) {\n    posterities.push(layer);\n    tailGetLayerPosterities(layer, posterities);\n  }\n}\n\nexport function getPagePosterities(\n  page,\n  artboardSort = ArtboardSortEnum.Left2RightByArtboard, // TODO: 用户指定排序\n  artboardLayersSort = ArtbaordLayersSortEnum.Bottom2TopByLayerList\n) {\n  let posterities = [];\n\n  // get artboards\n  let artboards = getArtboardsSorted(page, artboardSort);\n\n  // get artboards's layers\n  for (let artboard of artboards) {\n    posterities.push(artboard);\n    let list = [];\n    tailGetLayerPosterities(artboard, list);\n    if (artboardLayersSort === ArtbaordLayersSortEnum.Top2BottomByLayerList) {\n      posterities = posterities.concat(list);\n    } else if (\n      artboardLayersSort === ArtbaordLayersSortEnum.Bottom2TopByLayerList\n    ) {\n      posterities = posterities.concat(list.reverse());\n    }\n  }\n\n  return posterities;\n}\n\nexport function getHeadingLevel(layer, flag = \"#\") {\n  let name = layer.name;\n  let title = \"\";\n  for (let j = 0; j < name.length; ++j) {\n    if (name.charAt(j) !== flag) break;\n    title += \"#\";\n  }\n  return title.length;\n}\n\nexport function getHeading(layer) {\n  let name = layer.name;\n  return name.slice(getHeadingLevel(layer));\n}\n\nexport function isTopLayer(layer) {\n  return layer.parent.type === \"Page\";\n}\n","module.exports = require(\"sketch\");","module.exports = require(\"sketch/dom\");"],"sourceRoot":""}